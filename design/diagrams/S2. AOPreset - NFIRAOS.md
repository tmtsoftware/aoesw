```plantuml
!pragma teoz true
!include_many participants.puml
!includesub common.puml!variables
hide unlinked

  group NFIRAOS
    aosq -> ssNgs ++: source
    note left: Turn off NGS Source Simulator
    aosq -> ssNgs ++: deploy
    note left: Extract NGS Source Simulator
    aosq -> nscu ++: shutterOpen
    note left: Open NSCU entrance shutter
    aosq -> bs ++: select(SCIENCE)
    note left: Select the science beam splitter
    aosq -> vnwAdc ++: follow
    note left: Enable NGS ADC Follow mode 
    aosq -> vnwSsm ++: follow
    note left: Enable NGS SSM Follow mode 
    aosq -> timing ++: enableTrigger
    note left: Configure and start the timing generator
    aosq -> pwfs ++: setBinning
    note left: Configure VCAM
    return Completed
    aosq -> pwfs ++: startTriggeredExposures
    note left: Start VCAM continuous exposures
    aosq -> lgsWfs ++: startTriggeredExposures
    note left: Start LGS VCAM
    aosq -> trombone ++: follow/park
    note left: Configure trombone (NGS:park, LGS: follow)
    return Completed
    & return
    & return
    & return
    & return
    & return
    & return
    & return
    & return
    & return
    & return

    group If NSEN is used, done in parallel with above
    aosq -> nsen ++: BENCH_select_sensor
    note left: Activate NSEN ACQ camera
    return Completed
    aosq -> nsen ++: BENCH_move_sensor
    note left: Move NSEN stage to ACQ
    return Completed
    aosq -> nsen ++: ACQ_config_exposure
    note left: Configure NSEN Acq camera
    return Completed
    end
  end

```