```plantuml
!pragma teoz true
!include_many participants.puml
!includesub common.puml!variables
hide unlinked

ocs -> aosq ++: prepareOpenLoopDither

aosq -> rtc ++: loopPwfsDither
note left: Open gain estimation loop
return Completed
aosq -> rtc ++: loopLowTier0
note left: Open tip/tilt/focus loop
return Completed
aosq -> pwfs ++: stop
note left: Stop PWFS exposures
return Completed

loop For all applicable OIWFS/ODGW

group One of the following
aosq -> rtc ++: loopLowTier1
note left: Open the TT and focus mode reconstruction loop
return Completed
else
aosq -> rtc ++: loopLowTier2
note left: Open the tip/tilt and plate scale loop
return Completed
else
aosq -> rtc ++: loopLowTier3
note left: Open LO truth wavefront reconstruction loop
return Completed
end

alt OIWFS
aosq -> oiwfsDetector ++: exposure
note left: Stop OIWFS exposures
return Completed
else ODGW
aosq -> odgw ++: exposure
note left: Stop ODGW exposures
return Completed
end

end

return Completed

ocs -> tcs ++: dither
note left: Move telescope
return Completed

ocs -> aosq ++: endOpenLoopDither

aosq -> pwfs ++: startTriggeredExposures
note left: Restart PWFS continuous exposures
return Completed

alt 
aosq -> rtc ++: loopPwfsDither
note left: Close gain estimation loop
return Completed
aosq -> rtc ++: loopLowTier0
note left: Close tip/tilt/focus loop
return Completed
else On failure
!includesub common.puml!AcquirePWFS
end

loop For all applicable OIWFS/ODGW

alt OIWFS
aosq -> oiwfsDetector ++: exposure
note left: Restart OIWFS continuous exposures
return Completed
else ODGW
aosq -> odgw ++: exposure
note left: Restart ODGW continuous exposures
return Completed
end

group One of the following
alt
aosq -> rtc ++: loopLowTier1
note left: Close the TT and focus mode reconstruction loop
return Completed
else On failure
!includesub common.puml!AcquireTtfWFS
end
else
alt
aosq -> rtc ++: loopLowTier2
note left: Close the tip/tilt and plate scale loop
return Completed
else On failure
!includesub common.puml!AcquireTtWFS
end
else
alt
aosq -> rtc ++: loopLowTier3
note left: Close LO truth wavefront reconstruction loop
return Completed
else On failure
!includesub common.puml!AcquireLoTruthWFS
end
end

end

return Completed
```
