```plantuml
!pragma teoz true
!include_many participants.puml
!includesub common.puml!variables
hide unlinked

ocs -> aosq ++: StopAO

aosq -> rtc ++: loopsOpen
note left: Open all loops and stop offloading processes
aosq -> rtc ++: pipelineDeactivate
note left: Stop all background processes
return Completed
& return

aosq -> rpg ++: $TBD
note left: Stop the RPG update and optimization process
return Completed

aosq -> trombone ++: follow
note left: Disable LGS Trombone Follow mode 
aosq -> vnwAdc ++: follow
note left: Disable NGS ADC Follow mode 
aosq -> vnwSsm ++: follow
note left: Disble NGS SSM Follow mode 
return Completed
& return
& return

group OIWFS, for each probe used
aosq -> oiwfsPoa ++: POS_follow
note left: Stop POA follow mode
aosq -> oiwfsAdc ++: follow
note left: Stop ADC follow mode
aosq -> rotator ++: follow
note left: Stop instrument rotator follow mode
return Completed
& return
& return
end

aosq -> lgsf ++: setState(ON)
note left: Set LGSF state to ON
return Completed

alt If next observation does not use AO
aosq ->o? : See procedure 5.7.2
note left: Suspend AO

return Completed
```