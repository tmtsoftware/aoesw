```plantuml
!pragma teoz true
!include_many participants.puml
!includesub common.puml!variables
hide unlinked

ocs -> aosq ++: AcquireAndLockLoTruthOiwfsOrOdgw
group In parallel, for each low order truth WFS

alt OIWFS
aosq -> oiwfsDetector ++: exposure
note left: Take single exposure
return Completed
else ODGW
aosq -> odgw ++: exposure
note left: Take single exposure
return Completed
end
aosq -> aosq : Check flux
alt If flux not good
?<- aosq: Exit with error
end

aosq -> rtc ++: calibModeGrad
note left: Compute gradients
return Completed
aosq -> rtc ++: $TBD
note left: Compute average spot position.\nIf necessary, adjust gradient reference vector 
return Completed
aosq -> rtc ++: loopLowTier3
note left: Start LO truth wavefront reconstruction and close loop
return Completed

alt OIWFS
aosq -> oiwfsDetector ++: exposure
note left: Start continuous exposures.\nWindow shrinks according to table.
return Completed
else ODGW
aosq -> odgw ++: exposure
note left: Start continuous exposures.\nWindow shrinks according to table.
return Completed
end

end

return Completed

```